<body>
  <div class="container">

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-header">
        <a href="#" class="navbar-brand">＜</a>
        <a href="#" class="navbar-brand">カート一覧</a>
      </div>
    </nav>

    <br>
    <br>
    <br>

    <div class="text-left">
      <div class="row">
        <div class="col-xs-offset-1 col-xs-3">
          <h3>合計</h3>
        </div>
        <div class="col-xs-8">
          <h3>（税抜）<%= @amount %>円</h3>
        </div>
      </div>
    </div>
    <hr>
    <div class="col-xs-12 text-center">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Modal1">
        座席番号を入力して注文する
      </button>
    </div>
    <br>
    <br>
    <hr>

    <!-- ボタン・リンククリック後に表示される画面の内容 -->
    <div class="modal fade" id="Modal1" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4>注文確認画面</h4>
          </div>
          <%= form_tag('/carts/order', method: :post) do %>
          <div class="modal-body">
            <label>座席番号の入力をお願いします。</label>
            <%= select :seat, :number, [1,2,3,4,5], {}, {autofocus: 'true', class: 'form-control'} %>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
            <%= submit_tag "注文する", :class => "btn btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <br>
  <br>
  <hr>

  <h4>カート一覧</h4>
  <% @cart_items.each do |item| %>
    <div class="row">
      <div class="thumbnail">
        <%= image_tag "/#{item.menu.id}/main.png"%>
        <div class="caption">
          <div class="col-xs-12">
            <h4>
              <strong><%= item.menu.name %></strong>
            </h4>
            <hr>
          </div>
          <div class="col-xs-12 text-right">
            <h4>
              価格：（税抜）<%= item.menu.price %>円
            </h4>
            <hr>
          </div>
          <div class="col-xs-12 text-right">
            <h4>
              数量：<%= item.quantity %>
            </h4>
            <hr>
          </div>
          <div class="row">
            <div class="col-xs-6">
              <%= form_tag('/carts/delete', method: :post) do %>
              <%= hidden_field_tag :menuId, item.menu.id %>
              <%= submit_tag "削除", :class => "btn btn-block btn-warning"%>
            <% end %>
          </div>
          <div class="col-xs-6">
            <button type="button" class="btn btn-block btn-primary" data-toggle="modal" data-target="#ModalQuantity_<%= item.menu.id %>">
              数量を変更する
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%= form_tag('/carts/update', method: :post) do %>
  <%= hidden_field_tag :menuId, item.menu.id %>
  <div class="modal fade" id="ModalQuantity_<%= item.menu.id %>" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4>数量の変更をお願いします。</h4>
        </div>
        <div class="modal-body">
          <%= select :cart_list, :quantity, options_for_select([1,2,3,4,5], :selected => item.quantity), {}, {autofocus: 'true', class: 'form-control'} %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
          <%= submit_tag "数量を変更する", :class => "btn btn-primary" %>
        </div>
      </div>
    </div>
  </div>
  <% end %>
  <% end %>
  </div>
</body>
